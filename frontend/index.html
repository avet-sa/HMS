<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="icon" href="favicon.ico">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HMS - Hotel Management System</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <h1 class="logo">HMS</h1>
        <p class="tagline">Property Management System</p>
      </div>
      <div class="user-section">
        <button id="btn-toggle-theme" class="theme-toggle" title="Toggle dark/light theme">üåô</button>
        <a href="admin.html" id="admin-link" class="admin-link" style="display: none;">‚öôÔ∏è Admin</a>
        <span id="user-display" class="user-name">Guest</span>
        <button id="btn-logout" class="btn-logout" style="display: none;">Logout</button>
      </div>
    </header>

    <!-- Auth Modal -->
    <div id="auth-modal" class="modal modal-active">
      <div class="modal-content">
        <h2>Welcome Back</h2>
        <p class="modal-subtitle">Sign in to your account</p>
        <form id="auth-form">
          <div class="form-group">
            <label for="username">Username</label>
            <input type="text" id="username" placeholder="Enter your username" aria-label="username">
          </div>
          <div class="form-group">
            <label for="password">Password</label>
            <input type="password" id="password" placeholder="Enter your password" aria-label="password">
          </div>
          <div id="auth-message" class="message" aria-live="polite"></div>
          <button type="button" id="btn-login" class="btn btn-primary btn-full">Sign In</button>
          <button type="button" id="btn-register" class="btn btn-secondary btn-full">Create Account</button>
        </form>
      </div>
    </div>

    <!-- Main Dashboard -->
    <main id="dashboard" class="dashboard" style="display: none;">
      <!-- Navigation Tabs -->
      <nav class="nav-tabs">
        <button class="nav-tab active" data-tab="rooms">Rooms</button>
        <button class="nav-tab" data-tab="guests">Guests</button>
        <button class="nav-tab" data-tab="bookings">Bookings</button>
        <button class="nav-tab" data-tab="payments">Payments</button>
        <button class="nav-tab" data-tab="invoices">Invoices</button>
        <button class="nav-tab" data-tab="reports">Reports</button>
      </nav>

      <!-- Rooms Tab -->
      <section id="rooms" class="tab-content active">
        <div class="section-header">
          <h2>Room Inventory</h2>
          <button id="btn-refresh-rooms" class="btn btn-secondary btn-sm">Refresh</button>
        </div>
        <p id="rooms-message" class="message" aria-live="polite"></p>

        <div class="content-wrapper">
          <!-- Room List -->
          <div class="list-panel">
            <h3>Properties</h3>
            <div class="table-wrapper">
              <table class="data-table">
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>Room #</th>
                    <th>Type</th>
                    <th>Price/Night</th>
                    <th>Size (m¬≤)</th>
                    <th>Max Guests</th>
                    <th>Floor</th>
                    <th>Status</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="room-list">
                  <!-- Rooms will be populated here -->
                </tbody>
              </table>
            </div>
          </div>

          <!-- Add Room Form -->
          <div class="form-panel">
            <h3>Add New Room</h3>
            <form id="room-form">
              <div class="form-group">
                <label for="room-number">Room Number</label>
                <input type="text" id="room-number" placeholder="101">
              </div>
              <div class="form-group">
                <label for="room-type">Room Type</label>
                <select id="room-type">
                  <option value="">Select Type</option>
                  <option value="1">Single</option>
                  <option value="2">Double</option>
                  <option value="3">Suite</option>
                  <option value="4">Deluxe</option>
                </select>
              </div>
              <div class="form-group">
                <label for="room-price">Price per Night</label>
                <input type="number" id="room-price" placeholder="0.00" step="0.01">
              </div>
              <div class="form-row">
                <div class="form-group">
                  <label for="room-sqm">Square Meters</label>
                  <input type="number" id="room-sqm" placeholder="30">
                </div>
                <div class="form-group">
                  <label for="room-floor">Floor</label>
                  <input type="number" id="room-floor" placeholder="1">
                </div>
              </div>
              <button type="button" id="btn-add-room" class="btn btn-primary btn-full">Add Room</button>
            </form>
          </div>
        </div>
      </section>

      <!-- Payments Tab -->
      <section id="payments" class="tab-content">
        <div class="section-header">
          <h2>Payments</h2>
          <button id="btn-refresh-payments" class="btn btn-secondary btn-sm">Refresh</button>
        </div>
        <p id="payments-message" class="message" aria-live="polite"></p>

        <div class="content-wrapper">
          <div class="list-panel">
            <h3>Payments</h3>
            <div class="table-wrapper">
              <table class="data-table">
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>Booking</th>
                    <th>Amount</th>
                    <th>Currency</th>
                    <th>Method</th>
                    <th>Reference</th>
                    <th>Date</th>
                    <th>Status</th>
                  </tr>
                </thead>
                <tbody id="payment-list">
                  <!-- Payments will be populated here -->
                </tbody>
              </table>
            </div>
          </div>

          <div class="form-panel">
            <h3>Create Payment</h3>
            <form id="payment-form">
              <div class="form-group">
                <label for="payment-booking-id">Booking ID</label>
                <input type="number" id="payment-booking-id" placeholder="1">
              </div>
              <div class="form-group">
                <label for="payment-amount">Amount</label>
                <input type="number" id="payment-amount" placeholder="0.00" step="0.01">
              </div>
              <div class="form-group">
                <label for="payment-currency">Currency</label>
                <input type="text" id="payment-currency" value="USD">
              </div>
              <div class="form-group">
                <label for="payment-method">Method</label>
                <input type="text" id="payment-method" value="card">
              </div>
              <button type="button" id="btn-add-payment" class="btn btn-primary btn-full">Create Payment</button>
            </form>
          </div>
        </div>
        <br>
        <br>
      </section>

      <!-- Invoices Tab -->
      <section id="invoices" class="tab-content">
        <div class="section-header">
          <h2>Invoices</h2>
          <button id="btn-refresh-invoices" class="btn btn-secondary btn-sm">Refresh</button>
        </div>
        <p id="invoices-message" class="message" aria-live="polite"></p>

        <div class="content-wrapper">
          <div class="list-panel">
            <h3>All Invoices</h3>
            <div class="table-wrapper">
              <table class="data-table">
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>Invoice #</th>
                    <th>Booking</th>
                    <th>Subtotal</th>
                    <th>Tax</th>
                    <th>Total</th>
                    <th>Issued Date</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="invoice-list">
                  <!-- Invoices will be populated here -->
                </tbody>
              </table>
            </div>
          </div>

          <div class="form-panel">
            <h3>Generate Invoice</h3>
            <form id="invoice-form">
              <div class="form-group">
                <label for="invoice-booking-id">Booking ID</label>
                <input type="number" id="invoice-booking-id" placeholder="1">
              </div>
              <button type="button" id="btn-generate-invoice" class="btn btn-primary btn-full">Generate Invoice</button>
            </form>
          </div>
        </div>
        <br>
        <br>
      </section>

      <!-- Reports Tab -->
      <section id="reports" class="tab-content">
        <div class="section-header">
          <h2>Reports</h2>
        </div>
        <p id="reports-message" class="message" aria-live="polite"></p>

        <!-- Reports Input Area -->
        <div class="reports-input-area">
          <h3>Generate Reports</h3>
          <form id="reports-form">
            <div class="form-row">
              <div class="form-group">
                <label for="report-start">Start Date</label>
                <input type="date" id="report-start">
              </div>
              <div class="form-group">
                <label for="report-end">End Date</label>
                <input type="date" id="report-end">
              </div>
            </div>
            <div style="display:flex;gap:8px;margin-top:8px;flex-wrap:wrap;">
              <button type="button" class="btn btn-secondary btn-sm" onclick="setDateRange(7)" title="Last 7 days">7 Days</button>
              <button type="button" class="btn btn-secondary btn-sm" onclick="setDateRange(30)" title="Last 30 days">30 Days</button>
              <button type="button" class="btn btn-secondary btn-sm" onclick="setDateRange(90)" title="Last 90 days">90 Days</button>
              <button type="button" class="btn btn-secondary btn-sm" onclick="setDateRange(180)" title="Last 180 days">180 Days</button>
              <button type="button" class="btn btn-secondary btn-sm" onclick="setDateRange(365)" title="This year">365 Days</button>
            </div>
            <div style="display:flex;gap:8px;margin-top:12px;flex-wrap:wrap;">
              <button type="button" id="btn-occupancy-report" class="btn btn-secondary">Occupancy</button>
              <button type="button" id="btn-revenue-report" class="btn btn-secondary">Revenue</button>
              <button type="button" id="btn-trends-report" class="btn btn-secondary">Trends</button>
            </div>
          </form>
        </div>

        <!-- Reports Output Area (Full Width) -->
        <div class="reports-output-area">
          <div style="grid-column: 1 / -1; display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
            <h3 style="margin: 0;">Report Output</h3>
            <div id="report-export-buttons" style="display: flex; gap: 8px;"></div>
          </div>
          <div id="report-output"></div>
        </div>
      </section>

      <!-- Guests Tab -->
      <section id="guests" class="tab-content">
        <div class="section-header">
          <h2>Guest Management</h2>
          <button id="btn-refresh-guests" class="btn btn-secondary btn-sm">Refresh</button>
        </div>
        <p id="guests-message" class="message" aria-live="polite"></p>

        <div class="content-wrapper">
          <!-- Guest List -->
          <div class="list-panel">
            <h3>Registered Guests</h3>
            <div class="table-wrapper">
              <table class="data-table">
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Phone</th>
                    <th>Registered</th>
                    <th>Vip Tier</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="guest-list">
                  <!-- Guests will be populated here -->
                </tbody>
              </table>
            </div>
          </div>

          <!-- Add Guest Form -->
          <div class="form-panel">
            <h3>Register Guest</h3>
            <form id="guest-form">
              <div class="form-group">
                <label for="guest-name">First Name</label>
                <input type="text" id="guest-name" placeholder="John">
              </div>
              <div class="form-group">
                <label for="guest-surname">Last Name</label>
                <input type="text" id="guest-surname" placeholder="Doe">
              </div>
              <div class="form-group">
                <label for="guest-email">Email Address</label>
                <input type="email" id="guest-email" placeholder="john@example.com">
              </div>
              <button type="button" id="btn-add-guest" class="btn btn-primary btn-full">Register Guest</button>
            </form>
          </div>
        </div>
      </section>

      <!-- Bookings Tab -->
      <section id="bookings" class="tab-content">
        <div class="section-header">
          <h2>Reservations</h2>
          <button id="btn-refresh-bookings" class="btn btn-secondary btn-sm">Refresh</button>
        </div>
        <p id="bookings-message" class="message" aria-live="polite"></p>

        <div class="content-wrapper">
          <!-- Bookings List -->
          <div class="list-panel">
            <h3>Active Bookings</h3>
            <div class="table-wrapper">
              <table class="data-table">
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>Guest</th>
                    <th>Room</th>
                    <th>Check-in</th>
                    <th>Check-out</th>
                    <th>Nights</th>
                    <th>Total Price</th>
                    <th>Status</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="booking-list">
                  <!-- Bookings will be populated here -->
                </tbody>
              </table>
            </div>
          </div>

          <!-- Add Booking Form -->
          <div class="form-panel">
            <h3>New Reservation</h3>
            <form id="booking-form">
              <div class="form-group">
                <label for="booking-guest-id">Guest ID</label>
                <input type="number" id="booking-guest-id" placeholder="1">
              </div>
              <div class="form-group">
                <label for="booking-room-id">Room ID</label>
                <input type="number" id="booking-room-id" placeholder="1">
              </div>
              <div class="form-row">
                <div class="form-group">
                  <label for="booking-checkin">Check-in</label>
                  <input type="date" id="booking-checkin">
                </div>
                <div class="form-group">
                  <label for="booking-checkout">Check-out</label>
                  <input type="date" id="booking-checkout">
                </div>
              </div>
              <button type="button" id="btn-add-booking" class="btn btn-primary btn-full">Create Reservation</button>
            </form>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Module scripts (load in order) -->
  <script src="js/config.js"></script>
  <script src="js/utils.js"></script>
  <script src="js/theme.js"></script>
  <script src="js/api.js"></script>
  <script src="js/auth.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/reports.js"></script>
  <!-- Main app (must be last) -->
  <script src="js/app.js"></script>
</body>
</html>
